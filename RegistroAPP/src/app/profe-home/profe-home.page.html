<ion-header>
  <ion-toolbar>
    <ion-title>P치gina del Profesor</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Bienvenido, Profesor</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      {{ nombre }}
    </ion-card-content>
  </ion-card>

  <ion-button expand="block" (click)="seleccionarClaseYSeccion()" class="ion-margin-top">Seleccionar Clase y Secci칩n</ion-button>

  <br>
  <div *ngIf="qrData" class="qr-container">
    <h2>Clase: {{ claseSeleccionada }}</h2>
    <h3>Secci칩n: {{ seccionSeleccionada }}</h3>
    <qrcode [qrdata]="qrData" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
  </div>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Asistencias Registradas</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-card *ngFor="let claseSeccion of getAsistenciasPorClase() | keyvalue">
        <ion-card-header>
          <ion-card-title>{{ claseSeccion.key.split('_')[0] }} - {{ claseSeccion.key.split('_')[1] }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item *ngFor="let asistencia of claseSeccion.value">
              <ion-label>
                <h2>{{ asistencia.nombre }}</h2>
                <p>{{ asistencia.correo }}</p>
                <p>{{ asistencia.fechaHora }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-card-content>
  </ion-card>

  <ion-button expand="block" (click)="logout()" class="ion-margin-top">Cerrar Sesi칩n</ion-button>
</ion-content>